{% extends 'shared/base.html' %}
{% load static %}

{% block content %}
<h2>Welcome to the Basketball League</h2>

<h3>Teams</h3>
<div class ="row row-cols-1 row-cols-md-3 g-4">
    {% for team in teams %}
    <div class="team-card">
        <a href="{% url 'teams:details' team.pk %}">
            {% if team.logo %}
                <img src="{{ team.logo.url }}" alt="{{ team.name }}">
            {% endif %}
            <p>{{ team.name }}</p>
        </a>
    </div>
    {% endfor %}
</div>
<div class="mt-3">
      {% if teams.has_previous %}
    <a href="?team_page=1&game_page={{ request.GET.game_page }}" class="btn btn-outline-secondary btn-sm text-white">First</a>
    <a href="?team_page={{ teams.previous_page_number }}&game_page={{ request.GET.game_page }}" class="btn btn-outline-secondary btn-sm text-white">Previous</a>
    {% endif %}

<span class="mx-2">Page {{ teams.number }} of {{ teams.paginator.num_pages }}</span>

    {% if teams.has_next %}
    <a href="?team_page={{ teams.next_page_number }}&game_page={{ request.GET.game_page }}" class="btn btn-outline-secondary btn-sm text-white">Next</a>
    <a href="?team_page={{ teams.paginator.num_pages }}&game_page={{ request.GET.game_page }}" class="btn btn-outline-secondary btn-sm text-white">Last</a>
    {% endif %}
</div>

<h3>Played Games</h3>
<div class ="games-section">
    {% for game in games %}
    <div class="game-card">
        <strong>{{ game.home_team.name }}</strong>
        {% if game.home_team.logo %}
            <img src="{{ game.home_team.logo.url }}" width="40">
        {% endif %}
        <a href="{% url 'games:details' game.pk %}">
            {{ game.home_score }} : {{ game.away_score }}
        </a>

        {% if game.away_team.logo %}
            <img src="{{ game.away_team.logo.url }}" width="40">
        {% endif %}

        <strong>{{ game.away_team.name }}</strong>

        <div>{{ game.date }}</div>
    </div>
    {% endfor %}
</div>

<div class="mt-3">
      {% if games.has_previous %}
    <a href="?game_page=1&team_page={{ request.GET.team_page }}" class="btn btn-outline-secondary btn-sm text-white">First</a>
    <a href="?game_page={{ games.previous_page_number }}&team_page={{ request.GET.team_page }}" class="btn btn-outline-secondary btn-sm text-white">Previous</a>
    {% endif %}

<span class="mx-2">Page {{ games.number }} of {{ games.paginator.num_pages }}</span>

    {% if games.has_next %}
    <a href="?game_page={{ games.next_page_number }}&team_page={{ request.GET.team_page }}" class="btn btn-outline-secondary btn-sm text-white">Next</a>
    <a href="?game_page={{ games.paginator.num_pages }}&team_page={{ request.GET.team_page }}" class="btn btn-outline-secondary btn-sm text-white">Last</a>
    {% endif %}
</div>
{% endblock %}